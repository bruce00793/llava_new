================================================================================
                   LLaVA Map Detection è®­ç»ƒæ£€æŸ¥æ¸…å•
================================================================================

ğŸ“‹ è®­ç»ƒå‰å‡†å¤‡

æ•°æ®å‡†å¤‡:
  [ ] nuScenesæ•°æ®é›†å·²ä¸‹è½½
  [ ] æ•°æ®è·¯å¾„æ­£ç¡®ï¼š/path/to/nuscenes/
  [ ] å¯ä»¥çœ‹åˆ° v1.0-mini/ æˆ– v1.0-trainval/ ç›®å½•
  [ ] GT Cacheå·²ç”Ÿæˆï¼ˆtrainï¼‰
  [ ] GT Cacheå·²ç”Ÿæˆï¼ˆvalï¼‰

ç¯å¢ƒå‡†å¤‡:
  [ ] Condaç¯å¢ƒå·²æ¿€æ´»ï¼šconda activate llava_new
  [ ] PyTorchå·²å®‰è£…ï¼ˆcudaç‰ˆæœ¬ï¼‰
  [ ] Transformerså·²å®‰è£…
  [ ] nuScenes devkitå·²å®‰è£…

æ¨¡å‹å‡†å¤‡:
  [ ] Vicuna-7Bæ¨¡å‹å¯è®¿é—®ï¼ˆæˆ–å·²ä¸‹è½½ï¼‰
  [ ] BLIP-2å¯ä»¥ä¸‹è½½ï¼ˆæˆ–è®¾ç½®äº†é•œåƒï¼‰
  [ ] ç½‘ç»œè¿æ¥æ­£å¸¸ï¼ˆå¦‚éœ€ä¸‹è½½ï¼‰

ä»£ç å‡†å¤‡:
  [ ] åœ¨æ­£ç¡®ç›®å½•ï¼š/home/cly/auto/llava_test/LLaVA
  [ ] train_map_detection.py å­˜åœ¨
  [ ] scripts/train_stage2.sh å­˜åœ¨ä¸”å¯æ‰§è¡Œ
  [ ] test_training_setup.py å­˜åœ¨

é…ç½®ä¿®æ”¹:
  [ ] å·²ç¼–è¾‘ scripts/train_stage2.sh
  [ ] DATAROOT å·²ä¿®æ”¹ä¸ºå®é™…è·¯å¾„
  [ ] VERSION å·²è®¾ç½®ï¼ˆv1.0-mini æˆ– v1.0-trainvalï¼‰
  [ ] BATCH_SIZE å·²æ ¹æ®æ˜¾å­˜è°ƒæ•´

ç¡¬ä»¶å‡†å¤‡:
  [ ] GPUå¯ç”¨ï¼šnvidia-smi æ­£å¸¸
  [ ] æ˜¾å­˜è¶³å¤Ÿï¼ˆå‚è€ƒä¸‹è¡¨ï¼‰
  [ ] ç£ç›˜ç©ºé—´å……è¶³ï¼ˆ>100GB for trainvalï¼‰

--------------------------------------------------------------------------------

ğŸ’» æ˜¾å­˜éœ€æ±‚å‚è€ƒ

Batch Size | æ˜¾å­˜å ç”¨ | æ¨èGPU
-----------|---------|----------
    4      |  23GB   | A100 40GB
    2      |  15GB   | V100 32GB
    1      |  10GB   | RTX 3090 24GB

--------------------------------------------------------------------------------

âœ… å¯åŠ¨å‰æœ€åæ£€æŸ¥

  [ ] è¿è¡Œæµ‹è¯•è„šæœ¬ï¼špython test_training_setup.py
      â†’ åº”è¯¥çœ‹åˆ°ï¼šâœ… All core tests passed!

  [ ] æ£€æŸ¥GTæ–‡ä»¶å¤§å°ï¼š
      ls -lh gt_cache_*.pkl
      â†’ trainåº”è¯¥>1MB, valåº”è¯¥>500KB

  [ ] æ£€æŸ¥GPUï¼šnvidia-smi
      â†’ ç¡®è®¤æ˜¾å­˜å……è¶³

  [ ] æ£€æŸ¥ç£ç›˜ï¼šdf -h
      â†’ ç¡®è®¤ç©ºé—´å……è¶³ï¼ˆcheckpointsä¼šå ç”¨~10GBï¼‰

--------------------------------------------------------------------------------

ğŸš€ å¼€å§‹è®­ç»ƒ

å‘½ä»¤ï¼š
  cd /home/cly/auto/llava_test/LLaVA
  bash scripts/train_stage2.sh

æˆ–å¤šå¡ï¼š
  bash scripts/train_stage2_distributed.sh

--------------------------------------------------------------------------------

ğŸ“Š è®­ç»ƒç›‘æ§

é¢„æœŸæ—¥å¿—ï¼ˆæ­£å¸¸æƒ…å†µï¼‰ï¼š
  âœ… Model built successfully
  âœ… BLIP-2 Q-Former loaded
  âœ… Dataset loaded: XXX samples
  âœ… Epoch [1/24] Lossä¸‹é™

å¼‚å¸¸æƒ…å†µï¼š
  âŒ OOM â†’ é™ä½BATCH_SIZE
  âŒ Lossä¸å˜ â†’ æ£€æŸ¥å­¦ä¹ ç‡
  âŒ Lossçˆ†ç‚¸(NaN) â†’ é™ä½å­¦ä¹ ç‡æˆ–æ£€æŸ¥æ•°æ®

--------------------------------------------------------------------------------

ğŸ“ è¾“å‡ºæ£€æŸ¥

è®­ç»ƒä¸­åº”äº§ç”Ÿï¼š
  [ ] outputs/map_detection_stage2_YYYYMMDD_HHMMSS/ ç›®å½•
  [ ] config.json å·²ä¿å­˜
  [ ] checkpoint_epoch_1.pth å·²ç”Ÿæˆ
  [ ] æ—¥å¿—æ­£å¸¸è¾“å‡ºï¼ˆæ¯10æ­¥ï¼‰

è®­ç»ƒç»“æŸåº”æœ‰ï¼š
  [ ] best_model.pth ï¼ˆæœ€é‡è¦ï¼ï¼‰
  [ ] final_model.pth
  [ ] å¤šä¸ª checkpoint_epoch_N.pth

--------------------------------------------------------------------------------

ğŸ¯ é¢„æœŸè®­ç»ƒæ—¶é—´

v1.0-mini (404 samples):
  - å•å¡A100: ~2å°æ—¶
  - 4å¡A100: ~30åˆ†é’Ÿ

v1.0-trainval (28K samples):
  - å•å¡A100: ~100å°æ—¶ï¼ˆä¸æ¨èï¼‰
  - 4å¡A100: ~24å°æ—¶ï¼ˆæ¨èï¼‰
  - 8å¡A100: ~12å°æ—¶

--------------------------------------------------------------------------------

ğŸ“– é—®é¢˜æ’æŸ¥æ–‡æ¡£

  â€¢ è¯¦ç»†æ•™ç¨‹ï¼šTRAINING_GUIDE.md
  â€¢ å¿«é€Ÿå¼€å§‹ï¼šQUICKSTART.md
  â€¢ ä»£ç æ€»ç»“ï¼šTRAINING_SUMMARY.md

--------------------------------------------------------------------------------

âœ… å…¨éƒ¨å‹¾é€‰ï¼Ÿå¼€å§‹è®­ç»ƒï¼

  bash scripts/train_stage2.sh

================================================================================

